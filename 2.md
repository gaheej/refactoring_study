## 2.1 리팩터링 정의

- 리팩터링 : 동작은 그대로, 내부 구조만 변경 - 코드를 이해하고 수정하기 쉽게
- 리팩터링 작업중에는 동작을 그대로 보존하기 때문에 중간에 멈춰도 동작에 영향이 없다

## 2.2 두개의 모자

- 한번에 기능 추가 / 리팩터링 둘중 하나만 해라

## 2.3 리팩터링 하는 이유

### 소프트웨어 설계가 좋아진다

- 설계가 좋다 ⇒ 대략, 코드만 보고 설계를 쉽게 파악 할 수 있다, 중복 코드가 없다

### 소프트웨어를 이해하기 쉬워진다

- 이 코드를 나중에 보더라도 / 다른사람이 보더라도 이해하기 쉽게 한다

### 버그를 쉽게 찾을 수 있다

- 코드가 하는일을 깊이 파악하게 되니까

### 프로그래밍 속도를 높일 수 있다

- 시간이 지날수록 안좋은 구조로 코드가 쌓이면 속도가 안난다
- 옛날에는 프로젝트 시작할때 설계가 완벽해야 했다는데, 지금은 하면서 고치라구

## 2.4 언제 리팩터링 해야 할까?

- 3의 법칙 = 똑같은거 세번하면 리팩터링하자

### 준비를 위한 리팩터링 : 기능을 쉽게 추가하게 만들기

- 코드에 새 기능을 넣기 전
- 버그 잡기 전

### 이해를 위한 리팩터링 : 코드를 이해하기 쉽게 만들기

- 변수 이름도 좋게 바꾸고
- 함수를 잘게 쪼개기도 하고
- 하다보면 이해가 잘된다

### 쓰레기줍기 리팩터링

- 이해를 위한 리팩터링 하다가 쓰레기 발견하면 치우자

### 계획된 리팩터링과 수시로 하는 리팩터링

- 저자는 계획된 리팩터링 반대파
- 기능추가 할때 하거나 그냥 짬짬이 하거나

### 오래걸리는 리팩터링

- 저자는 단체로 달려들어 오래 리팩터링 하는데 반대파
- 주어진 문제를 조금씩 해결하는게 어떄?

### 코드 리뷰에 리팩터링 활용하기

- 코드리뷰를 통해 다른사람의 아이디어를 얻기 좋다. 너네도 정기적으로 해봐라
- 리팩터링은 다른사람의 코드를 리뷰하는데 도움된다 → 개선안 제시
- 풀리퀘 리뷰 보다는 짝프로그래밍에서 쓸만한 방법

### 관리자에게 뭐라고 말하지?

- 리팩터링 한다고 몇주씩 일정 잡으면 관리자는 다 싫어한다
- 이런식으로 하다간 리팩터링 못한다. 말하지 말고 해라
- 너는 프로니까 니 결과물에 책임을 져야 하고, 결과물을 잘 내려면 리팩토링 하는게 좋을껄?

### 리팩터링 하지 말아야 할 때

- 수정할 필요가 없는 코드는 안해도 된다
- 애초에 새로 작성하는게 나을때

## 2.5 리팩터링 시 고려할 문제

### 새 기능 개발 속도 저하

- 거의 모든 케이스에서 리팩터링은 개발 속도를 올린다고 본다
- 건드릴 일이 없거나 별로 안불편하면 안하기도 하는데, 알아서 판단해서 해라
- 리팩터링은 도덕적 목적이 아니고 경제적 목적으로 한다

### 코드 소유권

- 리팩터링할 부분이 내가 건드릴수 없는 부분까지 수정해야 할때
- 그냥 코드 소유권을 느슨하게 갖는게 좋겠다

### 브랜치

- 개인 작업 브랜치에서 오래 작업하다보면 다른 개발자들과의 차이가 커져서 리팩토링 하기 어렵다 (함수명 바꿨다가 다른 브랜치와 머지해서 쫑나는 케이스)
- 빠르게 CI + 리팩터링 하는 익스트림 프로그래밍을 쓰면 어때?

### 테스팅

- 리팩터링은 겉보기 동작은 건드리지 않기 때문에, 마음놓고 할 수 있다
- CI + 리팩터링 + 테스트가 중심인 익스트림 프로그래밍을 쓰면 어때?

### 레거시 코드

- 보통 테스트 코드가 없는 레거시 코드를 넘겨받는 경우가 많음. 테스트 보강부터 하자

### 데이터베이스

- 진화형 데이터베이스 설계, 데이터베이스 리팩터링 기법
- git 에 DDL + 데이터베이스 스키마 변경에 대한 마이그레이션 스크립트

## 2.6 리팩터링, 아키텍처, 애그니 (YAGNI)

- 프로젝트 시작시에 설계를 완성하려면, 요구사항도 확정되어야 하는데 그게 잘안된다
- 리팩터링을 활용하면, 현재까지 파악된 요구사항에 대해서만 해결하고, 요구사항이 추가 / 변경되면 그에 맞게 리팩터링 해가면서 대응한다

## 2.7 리팩터링과 소프트웨어 개발 프로세스

- 자가 테스트 + 리팩터링 = TDD
- CI + 테스트 + 리팩터링 = XP

## 2.8 리팩터링과 성능

- 리팩터링을 하면 성능에 악영향을 줄수 있다. 리팩터링의 목표 자체는 소프트웨어를 이해하기 쉽게 하는것
- 리팩터링 이후 성능 튜닝이 더 쉽게 될 수 있다. 튜닝하기 쉽게 소프트웨어를 바꾸고 튜닝을 해보자
- 성능 튜닝은.. 그냥 프로파일러 써서 가장 큰 병목을 찾아서 개선하면 된다..

## 2.9 리팩터링의 유래

- 라떼는 말이야..

## 2.10 리팩터링 자동화

- IDE 에서 제공하는 기능이 많대~
